# Интерфейс редактирования промптов v2

## Описание

Новый интерфейс редактирования промптов, аналогичный интерфейсу из проекта транскрибации. Позволяет создавать, редактировать и удалять несколько промптов для каждого канала.

## Возможности

1. **Список промптов слева** - показывает все сохранённые промпты выбранного типа
2. **Редактор справа** - позволяет редактировать выбранный промпт
3. **Два типа промптов:**
   - Промпт для дайджестов
   - Промпт для сводного документа
4. **Создание новых промптов** - можно создать несколько промптов одного типа
5. **Редактирование и удаление** - для каждого промпта доступны кнопки редактирования и удаления

## Структура БД

Создана таблица `channel_prompts`:
- `id` - уникальный ID промпта
- `channel_id` - ID канала
- `user_id` - ID пользователя (для безопасности)
- `prompt_type` - тип промпта ('digest' или 'consolidated')
- `name` - название промпта
- `text` - текст промпта
- `is_default` - является ли промпт используемым по умолчанию

## API Endpoints

- `GET /api/channels/{channel_id}/prompts` - получить все промпты канала
- `POST /api/channels/{channel_id}/prompts` - создать новый промпт
- `PUT /api/channels/{channel_id}/prompts/{prompt_id}` - обновить промпт
- `DELETE /api/channels/{channel_id}/prompts/{prompt_id}` - удалить промпт

## Использование

1. Откройте список каналов
2. Нажмите кнопку "Промпты" у нужного канала
3. Выберите тип промпта (дайджесты или сводный документ)
4. Выберите промпт из списка или создайте новый
5. Отредактируйте текст промпта
6. Сохраните изменения

## Миграция

Применена миграция `004_add_prompts_table.sql`, которая:
- Создаёт таблицу `channel_prompts`
- Мигрирует существующие промпты из `web_channels` в новую таблицу
- Создаёт индексы для быстрого поиска
