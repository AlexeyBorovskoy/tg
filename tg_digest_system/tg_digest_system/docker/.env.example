# ==============================================================================
# TG Digest System — переменные окружения (без секретов)
# ==============================================================================
# Скопируйте в .env: cp .env.example .env
# Секреты (PGPASSWORD, TG_*, OPENAI_API_KEY и т.д.) — в secrets.env (см. secrets.env.example)
# ==============================================================================

# -----------------------------------------------------------------------------
# PostgreSQL (контейнер)
# -----------------------------------------------------------------------------
PGDATABASE=tg_digest
PGUSER=tg_digest
PGPASSWORD=смените_на_надёжный_пароль
# Порт на хосте: по умолчанию 5433 (проверен; не конфликтует с системным postgres на 5432)
POSTGRES_HOST_PORT=5433
# Слушать только localhost (безопасность). Для доступа с других хостов: 0.0.0.0
POSTGRES_BIND_ADDRESS=127.0.0.1

# -----------------------------------------------------------------------------
# Telegram (API от https://my.telegram.org)
# -----------------------------------------------------------------------------
TG_API_ID=
TG_API_HASH=
TG_BOT_TOKEN=
# Чат для оповещений воркера (дайджесты, ошибки). Число — ID чата или пользователя.
# TG_STEP_NOTIFY_CHAT_ID=

# Сессия Telethon (создаётся после docker-compose run --rm auth)
# В контейнерах путь: /app/data/telethon.session
TG_SESSION_FILE=/app/data/telethon.session

# -----------------------------------------------------------------------------
# OpenAI
# -----------------------------------------------------------------------------
OPENAI_API_KEY=
OPENAI_MODEL=gpt-4o
OPENAI_MAX_TOKENS=2000
OPENAI_TEMPERATURE=0.1

# -----------------------------------------------------------------------------
# Веб-интерфейс
# -----------------------------------------------------------------------------
WEB_PORT=8000

# -----------------------------------------------------------------------------
# Остальное
# -----------------------------------------------------------------------------
TZ=Europe/Moscow
DEBUG=0

# GitLab (опционально): пуш дайджестов и сводных документов
GITLAB_ENABLED=0
GITLAB_REPO_URL=
GITLAB_BRANCH=main
GITLAB_SSH_KEY=
REPO_DIR=/app/repo

# -----------------------------------------------------------------------------
# Деплой с существующими данными (./deploy.sh --existing)
# Задайте PGHOST — хост существующей БД (postgres на хосте или в другой сети).
# На Mac/Windows: host.docker.internal; на Linux: IP хоста или имя контейнера.
# -----------------------------------------------------------------------------
# PGHOST=host.docker.internal
# PGPORT=5432
# PGDATABASE=tg_digest
# PGUSER=tg_digest
# PGPASSWORD=...

# Каталог данных воркера (сессия Telethon, логи, media). По умолчанию ./data.
# EXISTING_DATA_DIR=./data
# Промпты и конфиг по умолчанию берутся из репо: ../prompts, ../config
# EXISTING_PROMPTS_DIR=../prompts
# EXISTING_CONFIG_DIR=../config
